{
    "root": {
        "Name": "Benchmark-sysbench-fileio-docker",
        "Summary": "test with sysbench tool",
        "Owner": "wangqilin2@huawei.com",
        "Details": "Test fileio performance by caculating the i/o time",
        "Group": "Performance/Benchmark/sysbench/filo_io",
        "License": "Apache 2.0",
        "Source": null,
        "Requires": [
            {
                
	       "class":"operationOS", 
	        "type": "os",
	        "distribution": "Ubuntu14.04",
	        "resource": {
	            "CPU": 4,
	            "Memory": "16GB",
	            "Disk": "200G"
	        }
            }
            {      
                "class": "ImageA",
                "type": "container",
                "version": "Rocket",
                "file": null
            }
        ],
        "Deploy": [
            {
                "object": "hostA",
                "class": "OperationOS",
                "setup": {
                    "type": "cmd",
                    "value": "sudo rkt -debug=true -insecure-skip-verify run docker://ubuntu:14.04 --interactive"
                },
                "containers": [
                    {
                        "name": "RocketA",
                        "class": "ImageA",
                        "setup": {
                            "type": "cmd",
                            "value": "chmod 757 /etc/resolv.conf",
                            "type": "cmd",
                            "value": "echo 'nameserver 8.8.8.8' >> /etc/resolv.conf",
                            "type": "cmd",
                            "value": "apt-get update",
                            "type": "cmd",
                            "value": "apt-get install -y sysbench"
                        }
                    }
                ]
            }         
        ],
        "Run": [
            {
                "RocketA": {
                    "run": {
                        "type": "cmd",
                        "value": "sysbench --file-total-size=4096M --test=fileio prepare",
                        "type": "cmd",
                        "value": "sysbench --file-total-size=4096M  --file-test-mode=seqwr --test=fileio run",
                        "type": "cmd",
                        "value": "sysbench --file-total-size=4096M  --file-test-mode=seqrd --test=fileio run",
                        "type": "cmd",
                        "value": "sysbench --file-total-size=4096M  --file-test-mode=rndwr --test=fileio run",
                         "type": "cmd",
                        "value": "sysbench --file-total-size=4096M  --file-test-mode=rndrd --test=fileio run",
                        "type": "cmd",
                        "type": "sysbench --file-total-size=4096M --test=fileio cleanup",
                       "type": "cmd",
                        "value": "sysbench --file-total-size=8192M --test=fileio prepare",
                        "type": "cmd",
                        "value": "sysbench --file-total-size=8192M  --file-test-mode=seqwr --test=fileio run",
                        "type": "cmd",
                        "value": "sysbench --file-total-size=8192M  --file-test-mode=seqrd --test=fileio run",
                        "type": "cmd",
                        "value": "sysbench --file-total-size=8192M  --file-test-mode=rndwr --test=fileio run",
                         "type": "cmd",
                        "value": "sysbench --file-total-size=8192M  --file-test-mode=rndrd --test=fileio run",
                        "type": "cmd",
                        "type": "sysbench --file-total-size=8192M --test=fileio cleanup"
                    }
                }
            }
        ],
        "Collect": [
            {
                "DockerA": {
                    "collect": {
                        "type": "cmd",
                        "value": "octf_cli -f ~/filo_io_rkt.txt"
                    }
                }
            }
        ]
    }
}

