{
    "root": {
        "Name": "Benchmark-Test-Monitor-docker",
        "Summary": "test with cadvisor tool",
        "Owner": "linzhinan@huawei.com",
        "Details": "Monitor cpu totalusage via cadvisor",
        "Group": "Performance/Benchmark/monitor/cpumonitor/",
        "License": "Apache 2.0",
        "Source": [
                    "./source/Dockerfile",
	       "./source/cpu_per_core_usage.go",
                    "./source/deadloop.sh"
        ],
        "Requires": [
            {
                
	       "class":"operationOS", 
	        "type": "os",
	        "distribution": "Ubuntu14.04",
	        "resource": {
	            "CPU": 4,
	            "Memory": "16GB",
	            "Disk": "200G"
	        }
                
            }
            {
                
                "class": "ImageA",
                "type": "container",
                "version": "dockerV1.0",
                "file": [
		   "./source/Dockerfile"
		]
                
            }
        ],
        "Deploy": [
            {
                "object": "hostA",
                "class": "OperationOS",
                "setup": {
                    "type": "cmd",
                    "value": "cd /tmp",
                    "type": "cmd",
                    "value": "git clone https://github.com/google/cadvisor.git",
                    "type": "cmd",
                    "value": "godep go build .",
                    "type": "cmd",
                    "value": "echo hostpasswd | sudo -S ./cadvisor"
                },
                "containers": [
                    {
                        "name": "DockerA",
                        "class": "ImageA",
                        "setup": {
                            "type": "cmd",
                            "value": "cd /",
                            "type": "cmd",
                            "value": "./deadloop.sh"
                        }
                    }
                ]
            }         
        ],
        "Run": [
            {
                "hostA": {
                    "run": {
                        "type": "cmd",
                        "value": "cd ./source/",
                        "type": "cmd",
                        "value": "go build cpu_per_core_usage.go",
                        "cmd": "cmd",
                        "type": "sudo ./cpu_per_core_usage"
                    }
                    
                }
            },
            {
                "DockerA": {
                    "run": null
                }
            }
        ],
        "Collect": [
            {
                "DockerA": {
                    "collect": {
                        "type": "cmd",
                        "value": "octf_cli -f ~/cpu_per_core_usage.txt"
                    }
                }
            }
        ]
    }
}

